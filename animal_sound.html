<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>動物の学びに役立つサイト</title>
    <meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<link rel ="stylesheet" type ="text/css" href ="animal.css">
	<script type="text/javascript" src="animal.js">//</script>
  </head>
  <body>

	<div class="back">
	<p>ANIMAL</p>
	</div>
	
	<div class="menu">
	<ol>
	<li>
	<a href="#doubutu">動物について詳しくなろう！</a>
	</li>
	<li>
	<a href="#kuwasiku">詳細</a>
	</li>
	<li>
	<a href="#coming">Coming soon!</a>
	</li>
	</ol>
	</div>
	
	<h1><a id="doubutu">＜　動物について詳しくなろう！　＞</a></h1>
	
	<table>
	<tr>
	<td>レッサーパンダ</td>
	<td>ジャイアントパンダ</td>
    <td>バンドウイルカ</td>
	</tr>
	<tr>
	<td><a href="#ressa-"><img src="ressa-.jpg" width="70%" alt="レッサーパンダの写真" class="button"></a></td>
	<td><a href="#panda"><img src="panda.jpg" width="70%" alt="ジャイアントパンダの写真" class="button"></a></td>
	<td><a href="#iruka"><img src="iruka.jpg" width="70%" alt="バンドウイルカの写真" class="button"></a></td>
	</tr>
	</table>
	
	<h1><a id="kuwasiku">＜　詳細　＞</a></h1>
	
	
	<div class="anini">
	<table border="1">
	<tr>
	<th><a id="ressa-">名前</a></th>
	<td>
	レッサーパンダ　　会話する！⇒
	<button id="startButton1" class="button1">start</button>
	<button id="stopButton1" class="button2">stop</button>
	
	</td>
	</tr>
	<tr>
	<th>分類</th>
	<td>食肉目レッサーパンダ科レッサーパンダ属</td>
	</tr>
	<tr>
	<th>生息地</th>
	<td>ブータン・中国・ミャンマー・インド・ネパールの標高1500～4000mの森林</td>
	</tr>
	<tr>
	<th>説明</th>
	<td>もともとは肉食だが、現在のレッサーパンダの主食は竹や木の実。長いふさふさの尻尾が特徴的。
	かわいい見た目とは裏腹に荒い気性で、小さな物音にも敏感でいつも周囲を警戒している。日本の動物園ではよく飼育されているが絶滅危惧種に指定されている。</td>
	</tr>
	</table>
	</div>
	<div class ="picture">
	<img src="r1.jpg" width="150" alt="レッサーパンダの写真">
	<p></p>
	<img src="r2.jpg" width="150" alt="レッサーパンダの写真">
	</div>
	
	<div class="anini">
	<table border="1">
	<tr>
	<th><a id="panda">名前</a></th>
	<td>ジャイアントパンダ　　会話する！⇒
	<button id="startButton2" class="button1">start</button>
	<button id="stopButton2" class="button2">stop</button>
	</td>
	</tr>
	<tr>
	<th>分類</th>
	<td>食肉目クマ科ジャイアントパンダ属</td>
	</tr>
	<tr>
	<th>生息地</th>
	<td>中国（四川省など）</td>
	</tr>
	<tr>
	<th>説明</th>
	<td>主食は竹の幹や葉。野生のジャイアントパンダは1日に体重の約40％もの竹を食べる。そのため、1日の半分以上を食事に費やすこともある。
	動物園で動き回る姿を見られるのはレアかも・・・！現在レッドリストでは、絶滅危惧種から危急種に引き下げられた。</td>
	</tr>
	</table>
	</div>
	<div class ="picture">
	<img src="p1.jpg" width="150" alt="ジャイアントパンダの写真">
	<p></p>
	<img src="p2.jpg" width="150" alt="ジャイアントパンダの写真">
	</div>
	
	<div class="anini">
	<table border="1">
	<tr>
	<th><a id="iruka">名前</a></th>
	<td>バンドウイルカ　　会話する！⇒
	<button id="startButton3" class="button1">start</button>
	<button id="stopButton3" class="button2">stop</button>
	</td>
	</tr>
	<tr>
	<th>分類</th>
	<td>クジラ目ハクジラ亜目マイルカ科バンドウイルカ属</td>
	</tr>
	<tr>
	<th>生息地</th>
	<td>熱帯～温帯海域の世界中の海</td>
	</tr>
	<tr>
	<th>説明</th>
	<td>イルカの中でも最もよく知られていて、動物園での飼育数も最も多いバンドウイルカ。魚・イカ・甲殻類を好んで食べる。
	群れで行動していて、エコーを使って会話をしたり獲物の位置を確認したりしている。動物の中でトップクラスの知能を持つと言われている。</td>
	</tr>
	</table>
	</div>
	<div class ="picture">
	<img src="i1.jpg" width="150" alt="バンドウイルカの写真">
	<p></p>
	<img src="i2.jpg" width="150" alt="バンドウイルカの写真">
	</div>
	
    <br clear="left">
	<h1><a id="coming">＜　Coming soon!　＞</a></h2>
	<table class="more">
	<tr>
	<td>チーター</td>
	<td>フンボルトペンギン</td>
    <td>カリフォルニアアシカ</td>
	</tr>
	<tr>
	<td><img src="ti-ta-.jpg" width="150" alt="チーターの写真"></td>
	<td><img src="pengin.jpg" width="150" alt="ペンギンの写真"></td>
	<td><img src="asika.jpg" width="150" alt="アシカの写真"></td>
	<td>and more...</td>
	</tr>
	</table>
	
	<hr></hr>
	<footer>
	<p>👇Please check it out!</p>
    <a href="https://www.instagram.com/animaaaaal.134/">みや　Instagram</a>
    </footer>
	
	<script>
	// 応答の定義（ハッシュ）    
	var response = {
		"あなたは誰ですか":"わたしはレッサーパンダだよ",
		"こんにちは":"こんにちは",
		"元気ですか":"元気だよ",
		"かわいいね":"動物園の人気者なんだ",
		"しっぽふさふさだね":"いいでしょー",
		"好きな食べ物は":"りんご"
	};

	const startButton1 = document.querySelector('#startButton1'); // 開始ボタン
	const stopButton1 = document.querySelector('#stopButton1'); // 停止ボタン
	const resultOutput = document.querySelector('#resultOutput'); // 結果出力エリア

	if (!'SpeechSynthesisUtterance' in window) {
		alert("あなたのブラウザはSpeech Synthesis APIに未対応です。");
	}
	const tts = new SpeechSynthesisUtterance(); // TTSインスタンスを生成
	//tts.text = textForm.value; // テキストを設定
	tts.lang = "ja-JP"; // 言語(日本語)、英語の場合はen-US
	tts.rate = 1.0; // 速度
	tts.pitch = 1.0; // 声の高さ
	tts.volume = 1.0; // 音量

	SpeechRecognition = webkitSpeechRecognition || SpeechRecognition;
	if (!'SpeechRecognition' in window) {
		alert("あなたのブラウザはSpeech Recognition APIに未対応です。");
	}

	const asr = new SpeechRecognition(); // ASRインスタンスを生成
	asr.lang = "ja-JP"; // 言語（日本語）
	asr.interimResults = true; // 途中結果出力をオン
	asr.continuous = true; // 継続入力をオン

	let output = ''; // 出力

	// 認識結果が出力されたときのイベントハンドラ
	asr.onresult = function(event){
		let transcript = event.results[event.resultIndex][0].transcript; // 結果文字列

		let output_not_final = '';
		if (event.results[event.resultIndex].isFinal) { // 結果が確定（Final）のとき
			asr.abort(); // 音声認識を停止
			let answer = response[transcript];
		
			output += transcript + ' => ' + answer + '<br>';

			tts.text = answer;
			// 再生が終了（end）ときのイベントハンドラ（終了したときに実行される）
			tts.onend = function(event){
				asr.start(); // 音声認識を再開
			}

			speechSynthesis.speak(tts); // 再生
		} else { // 結果がまだ未確定のとき
			output_not_final = '<span style="color:#ddd;">' + transcript + '</span>';
		}
		resultOutput.innerHTML = output + output_not_final;
	}

	// 開始ボタンのイベントハンドラ
	startButton1.addEventListener('click', function() {
		asr.start();
	})

	// 停止ボタンのイベントハンドラ
	stopButton1.addEventListener('click', function() {
		asr.abort();
		asr.stop();
	})
	</script>

  </body>
</html>